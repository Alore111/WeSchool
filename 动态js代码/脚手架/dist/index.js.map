{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAA;;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAGA;;;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAFA;;AAcA;;;AAGA;AAAA;;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;;AACA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;AAnMA;AAyMA;AACA","sources":["webpack://test/./dist/index.js"],"sourcesContent":["function runCode(){\n              \r\n  \n            \n            var Page = function(page){\n              return page\n            }\n          return Page({\n            \n            parseTag(tag) {\n              let res = {\n                  type1: \"tag\",\n                  name: \"\",\n                  voidElement: false,\n                  // attrs: {},\n                  children: [],\n              };\n              let tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/);\n              if (tagMatch) {\n                  // 标签名称为正则匹配的第2项\n                  res.type1 = tagMatch[1];\n                  if (tag.charAt(tag.length - 2) === \"/\") {\n                      // 判断tag字符串倒数第二项是不是 / 设置为空标签。 例子：<img/>\n                      res.voidElement = true;\n                  }\n              }\n              // 匹配所有的标签正则\n              let classList = tag.match(/\\s([^'\"/\\s><]+?)\\s*?=\\s*?(\".*?\"|'.*?')/g);\n            \n              if (classList) {\n                let style = ''\n                  for (let i = 0; i < classList.length; i++) {\n                      // 去空格再以= 分隔字符串  得到['属性名称','属性值']\n             \n                      let c = classList[i].split(\"=\");\n                      // c[1] = c[1].replace(/\\s*/g, \"\")\n                      c[0] = c[0].replace(/\\s*/g, \"\")\n                      // 循环设置属性\n                      var lengthc = 2\n                      for(lengthc; lengthc < c.length ; lengthc++){\n                        c[1] += \"=\" + c[lengthc]\n                      }\n                      let p = c[1].substring(1, c[1].length - 1)\n                      try{\n                        p = JSON.parse(c[1].substring(1, c[1].length - 1))\n                      }catch(e){\n                       \n                      }\n            \n                      if (c[1]) {\n                        if(c[0] === 'style'){\n                          style = ';' + p + style \n                          res[c[0]] = style\n                        }else{\n                          res[c[0]] = p\n                        }\n                \n                      };\n            \n                  }\n              }\n              return res;\n            },\n            \n            parse(html) {\n              var that = this;\n              let result = [];\n              let current;\n              let level = -1;\n              let arr = [];\n              let tagRE = /<[a-zA-Z\\-\\!\\/](?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])*>/g;\n              html.replace(tagRE, function (tag, index) {\n                  // 判断第二个字符是不是'/'来判断是否open\n                  let isOpen = tag.charAt(1) !== \"/\";\n                  // 获取标签末尾的索引\n                  let start = index + tag.length;\n                  // 标签之前的文本信息\n                  let text = html.slice(start, html.indexOf(\"<\", start));\n            \n                  let parent;\n                  if (isOpen) {\n                      level++;\n                      // 设置标签属性\n                      current = that.parseTag(tag);\n                      // 判断是否为文本信息，是就push一个text children  不等于'  '\n                      if (!current.voidElement && text.trim()) {\n                          current[\"text\"] = text\n                      }\n                      // 如果我们是根用户，则推送新的基本节点\n                      if (level === 0) {\n                          result.push(current);\n                      }\n                      // 判断有没有上层，有就push当前标签\n                      parent = arr[level - 1];\n                      if (parent) {\n                          parent.children.push(current);\n                      }\n                      // console.log(current)\n                      arr[level] = current;\n                  }\n                  // 如果不是开标签，或者是空元素：</div><img>\n                  if (!isOpen || current.voidElement) {\n                      // level--\n                      level--;\n                  }\n              });\n              // console.log(result)\n              return result;\n            \n            },\n          setdata: function setdata(dictData) {\n            \n            for(var i in dictData){\n              this.data[i] = dictData[i]\n            }\n            var html = `<view class=\"contain\" style=\"padding: 40rpx;\">  ${this.data.detail.map((item, index) =>  ` <view style=\"banner\"  style=\"background-color: #fff; border-radius: 20rpx; padding: 0rpx 30rpx; padding-bottom: 20rpx;\">    <view class=\"banner-top\" style=\"align-items: center; display: flex; justify-content: space-between; padding: 20rpx 0rpx;\">      <view class=\"banner-top-start\" style=\"align-items: center; display: flex; left: 70rpx; position: absolute;\">        <view class=\"banner-top-left\" style=\"font-size: 32rpx; font-weight: 800; line-height: 66rpx; text-align: left;\">        <image style=\"banner-top-left-image\" src=\"${typeof item.icon === \"object\" ? JSON.stringify( item.icon) : item.icon}\" style=\"border-radius: 100%; height: 70rpx; vertical-align: middle; width: 70rpx;\"></image>         <text class=\"banner-top-left-text\" style=\"margin-left: 15rpx; margin-right: 5rpx;\">${typeof item.title === \"object\" ? JSON.stringify( item.title) : item.title}</text>       </view>      <view class=\"banner-top-label\" style=\"background-color: rgba(250,218,131); border-radius: 8rpx; color: rgba(85,41,2); font-size: 24rpx; margin-left: 20rpx; padding: 10rpx 8rpx;\">${typeof item.label === \"object\" ? JSON.stringify( item.label) : item.label}</view>            </view>         <view style=\"banner-top-button\" id=\"${typeof index === \"object\" ? JSON.stringify( index) : index}\" bindtap=\"btn\" style=\"background-color: rgba(229,77,66); border-radius: 30rpx; color: white; font-size: 26rpx; padding: 14rpx 18rpx;\">${typeof item.btn === \"object\" ? JSON.stringify( item.btn) : item.btn}</view>    </view>    <view class=\"banner-end\">      <image src=\"${typeof item.banner_img === \"object\" ? JSON.stringify( item.banner_img) : item.banner_img}\" class=\"banner-end-image\" mode=\"widthFix\"></image>    </view>      </view>`)}</view>`\n            this.setData({html : this.parse(html)});\n          },\n            \r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    detail:[\r\n      {\r\n        title:\"美团外卖红包\",\r\n        label:\"低价外卖\",\r\n        btn:\"折扣购买\",\r\n        icon:\"https://636c-cloud1-6gtqj1v4873bad50-1307814679.tcb.qcloud.la/coupon-img/logo.png?sign=71e2303e03df7c011e81f9dfd97197b9&t=1647496070\",\r\n        banner_img:\"https://636c-cloud1-6gtqj1v4873bad50-1307814679.tcb.qcloud.la/coupon-img/meituan.png?sign=daa94d028da89f3ccf97c339e8bae823&t=1647496039\",\r\n        appid:\"wxde8ac0a21135c07d\",\r\n        path:\"/index/pages/h5/h5?lch=cps:waimai:5:401c6e8a33376657a4d076948b9d76ec:001:33:164009&f_userId=1&weburl=https%3A%2F%2Fclick.meituan.com%2Ft%3Ft%3D1%26c%3D2%26p%3DwTe5Vb5z7TbP&f_token=1\"\r\n      }\r\n    ]\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {options = this.options; this.data.dark =wx.getSystemInfoSync().theme; wx.onThemeChange(e => {console.log(e.theme);this.setdata({dark: e.theme})}); this.setdata();\r\n\r\n  },\r\n  btn(e){\r\n    console.log(e)\r\n    let index = Number(e.target.id)\r\n    let res = this.data.detail[index]\r\n    console.log(res)\r\n    wx.navigateToMiniProgram({\r\n      appId: res.appid,\r\n      path:res.path,\r\n      success(res){\r\n        console.log(res)\r\n        console.log(111)\r\n      }\r\n    })\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n    \r\n  }\r\n})\n      \n      \n        }\n            window.exports = runCode;\n        \n            "],"names":[],"sourceRoot":""}