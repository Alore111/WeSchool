{"version":3,"file":"index.js","mappings":";;;;;;;;;;AAAA;;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AAgCA;AACA;AACA;;AACA;;;AAGA;AAAA;;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AATA;AAWA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;;;AAEA;;;AAGA;AAGA;AACA;AACA;AADA;AAGA;;;AAEA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAIA;;;AAGA;;AAGA;;AAGA;AA7WA;AAmXA;AACA","sources":["webpack://test/./dist/index.js"],"sourcesContent":["function runCode(){\n                \n            \n            var Page = function(page){\n              return page\n            }\n          return Page({\n            \n            parseTag(tag) {\n              let res = {\n                  type1: \"tag\",\n                  name: \"\",\n                  voidElement: false,\n                  // attrs: {},\n                  children: [],\n              };\n              let tagMatch = tag.match(/<\\/?([^\\s]+?)[/\\s>]/);\n              if (tagMatch) {\n                  // 标签名称为正则匹配的第2项\n                  res.type1 = tagMatch[1];\n                  if (tag.charAt(tag.length - 2) === \"/\") {\n                      // 判断tag字符串倒数第二项是不是 / 设置为空标签。 例子：<img/>\n                      res.voidElement = true;\n                  }\n              }\n              // 匹配所有的标签正则\n              let classList = tag.match(/\\s([^'\"/\\s><]+?)\\s*?=\\s*?(\".*?\"|'.*?')/g);\n            \n              if (classList) {\n                let style = ''\n                  for (let i = 0; i < classList.length; i++) {\n                      // 去空格再以= 分隔字符串  得到['属性名称','属性值']\n             \n                      let c = classList[i].split(\"=\");\n                      // c[1] = c[1].replace(/\\s*/g, \"\")\n                      c[0] = c[0].replace(/\\s*/g, \"\")\n                      // 循环设置属性\n                      var lengthc = 2\n                      for(lengthc; lengthc < c.length ; lengthc++){\n                        c[1] += \"=\" + c[lengthc]\n                      }\n                      let p = c[1].substring(1, c[1].length - 1)\n                      try{\n                        p = JSON.parse(c[1].substring(1, c[1].length - 1))\n                      }catch(e){\n                       \n                      }\n            \n                      if (c[1]) {\n                        if(c[0] === 'style'){\n                          style = p + style\n                          res[c[0]] = style\n                        }else{\n                          res[c[0]] = p\n                        }\n                \n                      };\n            \n                  }\n              }\n              return res;\n            },\n            \n            parse(html) {\n              var that = this;\n              let result = [];\n              let current;\n              let level = -1;\n              let arr = [];\n              let tagRE = /<[a-zA-Z\\-\\!\\/](?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])*>/g;\n              html.replace(tagRE, function (tag, index) {\n                  // 判断第二个字符是不是'/'来判断是否open\n                  let isOpen = tag.charAt(1) !== \"/\";\n                  // 获取标签末尾的索引\n                  let start = index + tag.length;\n                  // 标签之前的文本信息\n                  let text = html.slice(start, html.indexOf(\"<\", start));\n            \n                  let parent;\n                  if (isOpen) {\n                      level++;\n                      // 设置标签属性\n                      current = that.parseTag(tag);\n                      // 判断是否为文本信息，是就push一个text children  不等于'  '\n                      if (!current.voidElement && text.trim()) {\n                          current[\"text\"] = text\n                      }\n                      // 如果我们是根用户，则推送新的基本节点\n                      if (level === 0) {\n                          result.push(current);\n                      }\n                      // 判断有没有上层，有就push当前标签\n                      parent = arr[level - 1];\n                      if (parent) {\n                          parent.children.push(current);\n                      }\n                      // console.log(current)\n                      arr[level] = current;\n                  }\n                  // 如果不是开标签，或者是空元素：</div><img>\n                  if (!isOpen || current.voidElement) {\n                      // level--\n                      level--;\n                  }\n              });\n              // console.log(result)\n              return result;\n            \n            },\n          setdata: function setdata(dictData) {\n            \n            for(var i in dictData){\n              this.data[i] = dictData[i]\n            }\n            var html = `<view class=\"container\">  <view class=\"title\" style=\"display: table; margin: 0 auto; margin-top: 70rpx;\">    <view class=\"title-text\" style=\"color: rgba(0, 0, 0, 0.7); font-size: 30rpx; font-weight: 800; margin-bottom: 26rpx;\">原始数据</view>    <view class=\"title-data\" style=\"display: flex; margin-bottom: 15rpx;\">      <input style=\"title-data-input\" value=\"${typeof this.data.experimentData === \"object\" ? JSON.stringify( this.data.experimentData) : this.data.experimentData}\" bindinput=\"input\" placeholder=\"数据之间以空格分隔如(3.02 2.99 2.8) \" type=\"text\" style=\"border: 1rpx solid #DCE0E7; border-radius: 20rpx; color: #C1C2C5; font-size: 26rpx; height: 80rpx; padding-left: 18rpx; width: 500rpx;\"></input>      <view class=\"title-data-submit\" bindtap=\"submit\" style=\"align-items: center; background-color: #A1DFCD; border-radius: 20rpx; color: white; display: flex; font-size: 24rpx; line-height: 42rpx; margin-left: 26rpx; margin-right: 10rpx; padding: 0rpx 30rpx;\"><image class=\"title-data-submit-submit\" src=\"./images/computer.png\" style=\"display: inline-block; height: 48rpx; vertical-align: middle; width: 48rpx;\"></image></view>    </view>      <view class=\"title-choose\" style=\"display: flex; font-size: 23rpx; margin-bottom: 45rpx; margin-top: 20rpx;\">        <picker mode=\"selector\" range=\"${typeof this.data.multiArray === \"object\" ? JSON.stringify( this.data.multiArray) : this.data.multiArray}\" value=\"${typeof this.data.multiIndex === \"object\" ? JSON.stringify( this.data.multiIndex) : this.data.multiIndex}\" bindchange=\"bindMultiPickerChange\" style=\"display: flex;\">          <view class=\"title-choose-text\" style=\"background-color: #B2E2F7; border-radius: 10rpx; color: white; display: flex; padding: 10rpx;\"><text>${typeof this.data.instrument_name === \"object\" ? JSON.stringify( this.data.instrument_name) : this.data.instrument_name}</text><image class=\"title-choose-image\" src=\"./images/down.png\" style=\"height: 28rpx; margin-left: 10rpx; vertical-align: middle; width: 28rpx;\"></image></view>      </picker>        ${typeof this.data.show === \"object\" ? JSON.stringify( this.data.show) : this.data.show==\"choose\" ? `<view  class=\"title-choose-inch\" style=\"position: absolute; right: 53rpx;\">          <picker mode=\"selector\" range=\"${typeof this.data.calibration === \"object\" ? JSON.stringify( this.data.calibration) : this.data.calibration}\" value=\"${typeof this.data.calibrationIndex === \"object\" ? JSON.stringify( this.data.calibrationIndex) : this.data.calibrationIndex}\" bindchange=\"bindpickerchange\" style=\"display: flex;\">          <view class=\"title-choose-text\" style=\"background-color: #B2E2F7; border-radius: 10rpx; color: white; display: flex; padding: 10rpx;\"><text>${typeof this.data.calibrationItem === \"object\" ? JSON.stringify( this.data.calibrationItem) : this.data.calibrationItem}</text><image class=\"title-choose-image\" src=\"./images/down.png\" style=\"height: 28rpx; margin-left: 10rpx; vertical-align: middle; width: 28rpx;\"></image></view>          </picker>        </view>`: ``}        ${typeof this.data.show === \"object\" ? JSON.stringify( this.data.show) : this.data.show==\"input\" ? `<view  class=\"title-choose-input\" style=\"border: 1rpx solid #B2E2F7; border-radius: 10rpx; position: absolute; right: 53rpx;\">          <input type=\"number\" style=\"padding-left:10rpx\" placeholder=\"请输入仪器误差\" value=\"${typeof this.data.other_err === \"object\" ? JSON.stringify( this.data.other_err) : this.data.other_err}\" bindinput=\"err_input\"></input>        </view>`: `2`}    </view>  </view>  <view class=\"body\" style=\"border-top: 1rpx solid rgba(187,187,187,0.3); margin: 0 25rpx; margin-bottom: 30rpx;\">    ${this.data.data_show.map((item, index) =>  ` <view style=\"body-describe\"  style=\"border-bottom: 1rpx solid rgba(187,187,187,0.3); display: flex; font-size: 26rpx; padding: 30rpx 0rpx;\">            <text class=\"body-describe-text\" style=\"margin-left: 24rpx;\">${typeof item.name === \"object\" ? JSON.stringify( item.name) : item.name}:</text>      <view class=\"body-describe-data\" style=\"border-bottom: 1rpx solid rgba(187,187,187,0.5); position: absolute; right: 60rpx;\">${typeof item.res === \"object\" ? JSON.stringify( item.res) : item.res}</view>    </view>`)}  </view>   <view class=\"end\" style=\"height: 100rpx; width: 100%;\">  <view class=\"end-text\" bindtap=\"Check\" style=\"background-color: #A1DFCD; border-radius: 20rpx; color: #FCFCFC; font-size: 26rpx; font-weight: 800; height: 80rpx; left: 50%; line-height: 80rpx; margin-bottom: 30rpx; margin-left: -100rpx; position: relative; text-align: center; top: 0%; width: 200rpx;\">查看公式</view></view></view>`\n            this.setData({html : this.parse(html)});\n          },\n            \n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n    //输入的数据\n    experimentData:\"\",\n    //\n    ContentDescripe:[\n      \"算术平均值\",\n      \"标准偏差\",\n      \"算术平均偏差\",\n      \"a类不确定度\",\n      \"b类不确定度\",\n      \"总不确定度\",\n      \"总相对不确定度\"\n    ],\n    //b类不确定度的picker数据,用到的东西有点多后续优化\n      multiArray: [\"钢直尺\",\"钢卷尺\",\"游标卡尺\",\"螺旋测微器\",\"物理天平\",\"TG928A矿山天平\",\"水银温度计\",\"读数显微镜\",\"其他\"],\n      multiIndex: 0,\n      calibrationIndex:0,\n      show:false,\n      calibration:[],\n      calibrationItem:\"请选择实验过程使用仪器的刻度\",\n      instrument_name:\"请选择实验过程使用的仪器\",\n      other_err:\"\",\n      data_show:[\n       {name:\"算术平均数\",res:\"NaN\"},\n       {name: \"标准偏差\",res:\"NaN\"},\n       {name:\"算术平均的标准偏差\",res:\"NaN\"},\n       {name:\"b类不确定度\",res:\"NaN\"},\n       {name:\"a类不确定度\",res:\"NaN\"},\n       {name:\"总不确定度\",res:\"NaN\"},\n       {name:\"总相对不确定度\",res:\"NaN\"},\n      ]\n  },\n  err_input(e){\n    this.setdata({other_err:e.detail.value})\n  },\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {options = this.options; this.data.dark =wx.getSystemInfoSync().theme; wx.onThemeChange(e => {console.log(e.theme);this.setdata({dark: e.theme})}); this.setdata();\n    \n  },\n  //输入\n  input(e){\n    this.setdata({\n      experimentData:e.detail.value\n    })\n  },\n  //b类不确定处理封装成一个函数\n  process(instrument_name){\n    let res = []\n\n    if(instrument_name==\"游标卡尺\"){\n      res.push(\"0.02mm\",\"0.05mm\",\"0.1mm\")\n      console.log(res)\n      this.setdata({\n      //存储是否展示\n      show:\"choose\",\n      //存储刻度\n      calibration:res\n    })\n    }\n    if(instrument_name==\"水银温度计\"){\n      res.push(\"0.2℃\",\"0.1℃\")\n      console.log(res)\n     this.setdata({\n      //存储是否展示\n      show:\"choose\",\n      //存储刻度\n      calibration:res\n    })\n    }\n    if(instrument_name==\"其他\"){\n      this.setdata({\n        //存储是否展示\n        show:\"input\",\n        //存储刻度\n        calibration:res\n      })\n    }\n  },\n  //提交表单前的数据处理\n  computer(){\n    let input_data = this.data.experimentData\n    input_data=input_data.split(\" \")\n    let res = []\n    let flag = 0\n    input_data.forEach(element => {\n      if(isNaN(Number(element))){\n        flag=1        \n      }\n    res.push(Number(element))\n  });\n  if(flag==1){\n    return \"数据输入框格式错误\"\n  }\n  else{\n    if(res[0]==0){\n      return \"您还未输入数据\"\n    }\n    return res\n  }\n  },\n  //提交表单\n  submit(){\n    var that = this\n  let res = this.computer()\n  let result = {\n    \"experimentData\":[],\n    \"b_\":\"\"\n  }\n  if(typeof(res)==\"string\"){\n    wx.showToast({\n      title:res,\n      icon:\"none\"\n    })\n  }\n  else{\n    var that = this\n    console.log(res)\n    if(this.data.instrument_name==\"游标卡尺\"||this.data.instrument_name==\"水银温度计\"){\n      console.log(that.data.calibrationItem)\n      if(that.data.calibrationItem==\"请选择实验过程使用仪器的刻度\"){\n        wx.showToast({\n          title: '您还没选择刻度',\n          icon:\"none\"\n        })\n      }\n      let b_ = Number(that.data.calibrationItem.replace(\"mm\",\"\").replace(\"℃\",\"\"))\n       result = {\n        \"experimentData\":res,\n        \"b_\":b_/(3**(1/2))\n      }\n      console.log(result)\n    }\n    if(this.data.instrument_name==\"其他\"){\n      console.log(this.data.other_err)\n      if(this.data.other_err/(3**(1/2))==0){\n        wx.showToast({\n          title: '请输入仪器误差',\n          icon:\"none\"\n        })\n      }\n      if(isNaN(this.data.other_err/(3**(1/2)))){\n        wx.showToast({\n          title: '仪器误差输入框格式错误,应为数字类型',\n          icon:\"none\"\n        })\n      }\n       result = {\n        \"experimentData\":res,\n        \"b_\":this.data.other_err/(3**(1/2))\n      }\n      console.log(result)\n    }\n    if(this.data.instrument_name==\"钢直尺\"||this.data.instrument_name==\"钢卷尺\"||this.data.instrument_name==\"螺旋测微器\"||this.data.instrument_name==\"物理天平\"||this.data.instrument_name==\"TG928A矿山天平\"||this.data.instrument_name==\"读数显微镜\"){\n\n    //定义哈希表把所有情况列举时间复杂度最低\n    let hash = {\"钢直尺\":0.1,\"钢卷尺\":0.5,\"螺旋测微器\":0.004,\"物理天平\":50,\"TG928A矿山天平\":5,\"读数显微镜\":0.004,}\n    let b_ = hash[this.data.instrument_name]\n     result = {\n        \"experimentData\":res,\n        \"b_\":b_/(3**(1/2))\n      }\n      console.log(result)\n    }\n    if(this.data.instrument_name==\"请选择实验过程使用的仪器\"){\n      wx.showToast({\n        title: '您还未选择实验仪器',\n        icon:\"none\"\n      })\n    }\n  }\n\n  console.log(result)\n//在这里进行异步请求加判断\n  wx.request({\n    url: 'https://www.biubbmk.cn/api_flask_zf/physical_Default',\n    method:\"POST\",\n    data:{\n      arr:result.experimentData,\n      ub:result.b_\n    },\n    success(res){\n      that.setdata({data_show:res.data})\n    }\n  })\n  },\n  //滚动事件\n  bindMultiPickerChange: function (e) {\n    let instrument_name = this.data.multiArray[e.detail.value]\n    console.log(instrument_name)\n    this.setdata({\n      multiIndex: e.detail.value,\n      show:false,\n      instrument_name,\n      calibrationItem:\"请选择实验过程使用仪器的刻度\", //初始化防止后续干扰\n      other_err:\"\"\n    })\n    this.process(instrument_name)\n  },\n  bindpickerchange(e){\n    this.setdata({\n      calibrationIndex: e.detail.value,\n      calibrationItem:this.data.calibration[e.detail.value]\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n    \n  },\n  Check(){\n    wx.navigateTo({\n      url: '/pages/test1/test1',\n    })\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n    \n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n    \n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n  },\n  \n  onReachBottom: function () {\n  },\n   \n  onShareAppMessage: function () {\n    \n  }\n})\n      \n      \n        }\n            window.exports = runCode;\n        \n            "],"names":[],"sourceRoot":""}